//
// FX Version: fx_5_0
//
// 2 local object(s)
//
SamplerState Point
{
    Filter   = uint(MIN_MAG_MIP_POINT /* 0 */);
    AddressU = uint(WRAP /* 1 */);
    AddressV = uint(WRAP /* 1 */);
    AddressW = uint(WRAP /* 1 */);
};
Texture3D noiseTex;

//
// 1 groups(s)
//
fxgroup
{
    //
    // 1 technique(s)
    //
    technique11 Test1
    {
        pass P0
        {
            VertexShader = asm {
                //
                // Generated by Microsoft (R) HLSL Shader Compiler 6.3.9600.16384
                //
                //
                //
                // Input signature:
                //
                // Name                 Index   Mask Register SysValue  Format   Used
                // -------------------- ----- ------ -------- -------- ------- ------
                // SV_VertexID              0   x           0   VERTID    uint   x   
                // SV_InstanceID            0   x           1   INSTID    uint   x   
                //
                //
                // Output signature:
                //
                // Name                 Index   Mask Register SysValue  Format   Used
                // -------------------- ----- ------ -------- -------- ------- ------
                // SV_Position              0   xyzw        0      POS   float   xyzw
                // TexCoord                 0   xyz         1     NONE   float   xyz 
                // SliceIndex               0   x           2     NONE    uint   x   
                //
                vs_5_0
                dcl_globalFlags refactoringAllowed | skipOptimization
                dcl_input_sgv v0.x, vertex_id
                dcl_input_sgv v1.x, instance_id
                dcl_output_siv o0.xyzw, position
                dcl_output o1.xyz
                dcl_output o2.x
                dcl_temps 4
                //
                // Initial variable locations:
                //   v0.x <- vertexID; 
                //   v1.x <- instanceID; 
                //   o2.x <- <VS return value>.instanceID; 
                //   o1.x <- <VS return value>.uvw.x; o1.y <- <VS return value>.uvw.y; o1.z <- <VS return value>.uvw.z; 
                //   o0.x <- <VS return value>.position.x; o0.y <- <VS return value>.position.y; o0.z <- <VS return value>.position.z; o0.w <- <VS return value>.position.w
                //
                #line 16 "E:\Desktop\ComplexTerrainTest\Chapter 11 The Geometry Shader\TreeBillboard\FX\buildDensity.fx"
                mov r0.x, l(4)
                udiv null, r0.x, v0.x, r0.x
                mov r0.y, l(0)
                ieq r0.x, r0.y, r0.x
                utof r1.z, v1.x
                itof r1.xy, l(1, 0, 0, 0)
                utof r2.z, v1.x
                itof r2.xy, l(0, 0, 0, 0)
                movc r0.xyz, r0.xxxx, r1.xyzx, r2.xyzx  // r0.x <- result.uvw.x; r0.y <- result.uvw.y; r0.z <- result.uvw.z
                mov r0.w, l(4)
                udiv null, r0.w, v0.x, r0.w
                mov r1.x, l(1)
                ieq r0.w, r0.w, r1.x
                utof r1.z, v1.x
                itof r1.xy, l(0, 0, 0, 0)
                movc r0.xyz, r0.wwww, r1.xyzx, r0.xyzx
                mov r0.w, l(4)
                udiv null, r0.w, v0.x, r0.w
                mov r1.x, l(2)
                ieq r0.w, r0.w, r1.x
                utof r1.z, v1.x
                itof r1.xy, l(1, 1, 0, 0)
                movc r0.xyz, r0.wwww, r1.xyzx, r0.xyzx
                mov r0.w, l(4)
                udiv null, r0.w, v0.x, r0.w
                mov r1.x, l(3)
                ieq r0.w, r0.w, r1.x
                utof r1.z, v1.x
                itof r1.xy, l(0, 1, 0, 0)
                movc r0.xyz, r0.wwww, r1.xyzx, r0.xyzx
                utof r0.w, v1.x
                div r0.w, r0.w, l(3.000000)  // r0.w <- w
                mov r1.x, l(4)
                udiv null, r1.x, v0.x, r1.x
                mov r1.y, l(0)
                ieq r1.x, r1.y, r1.x
                add r2.x, r0.w, l(0.000000)
                itof r2.yzw, l(0, 0, 0, 1)
                itof r1.y, l(-1)
                add r3.x, r0.w, r1.y
                itof r3.yzw, l(0, 0, 0, 1)
                movc r1.xyzw, r1.xxxx, r2.xyzw, r3.xyzw  // r1.x <- result.position.x; r1.y <- result.position.y; r1.z <- result.position.z; r1.w <- result.position.w
                mov r2.x, l(4)
                udiv null, r2.x, v0.x, r2.x
                mov r2.y, l(1)
                ieq r2.x, r2.y, r2.x
                itof r2.y, l(-1)
                add r3.x, r0.w, r2.y
                itof r3.yzw, l(0, 0, 0, 1)
                movc r1.xyzw, r2.xxxx, r3.xyzw, r1.xyzw
                mov r2.x, l(4)
                udiv null, r2.x, v0.x, r2.x
                mov r2.y, l(2)
                ieq r2.x, r2.y, r2.x
                itof r2.y, l(0)
                add r3.x, r0.w, r2.y
                itof r3.yzw, l(0, 1, 0, 1)
                movc r1.xyzw, r2.xxxx, r3.xyzw, r1.xyzw
                mov r2.x, l(4)
                udiv null, r2.x, v0.x, r2.x
                mov r2.y, l(3)
                ieq r2.x, r2.y, r2.x
                itof r2.y, l(-1)
                add r3.x, r0.w, r2.y
                itof r3.yzw, l(0, 1, 0, 1)
                movc r1.xyzw, r2.xxxx, r3.xyzw, r1.xyzw
                mov r0.w, v1.x  // r0.w <- result.instanceID
                
                #line 27
                mov o0.xyzw, r1.xyzw
                mov o1.xyz, r0.xyzx
                mov o2.x, r0.w
                ret 
                // Approximately 71 instruction slots used
                            
            };
            GeometryShader = asm {
                //
                // Generated by Microsoft (R) HLSL Shader Compiler 6.3.9600.16384
                //
                //
                //
                // Input signature:
                //
                // Name                 Index   Mask Register SysValue  Format   Used
                // -------------------- ----- ------ -------- -------- ------- ------
                // SV_Position              0   xyzw        0      POS   float   xyzw
                // TexCoord                 0   xyz         1     NONE   float   xyz 
                // SliceIndex               0   x           2     NONE    uint   x   
                //
                //
                // Output signature:
                //
                // Name                 Index   Mask Register SysValue  Format   Used
                // -------------------- ----- ------ -------- -------- ------- ------
                // SV_POSITION              0   xyzw        0      POS   float   xyzw
                // TEXCOORD                 0   xyz         1     NONE   float   xyz 
                // SV_RenderTargetArrayIndex     0   x           2  RTINDEX    uint   x   
                //
                gs_5_0
                dcl_globalFlags refactoringAllowed | skipOptimization
                dcl_input_siv v[3][0].xyzw, position
                dcl_input v[3][1].xyz
                dcl_input v[3][2].x
                dcl_temps 3
                dcl_inputprimitive triangle 
                dcl_stream m0
                dcl_outputtopology trianglestrip 
                dcl_output_siv o0.xyzw, position
                dcl_output o1.xyz
                dcl_output_siv o2.x, rendertarget_array_index
                dcl_maxout 3
                //
                // Initial variable locations:
                //   m0 <- gsout; 
                //   v[0][0].x <- input[0].position.x; v[0][0].y <- input[0].position.y; v[0][0].z <- input[0].position.z; v[0][0].w <- input[0].position.w; 
                //   v[0][1].x <- input[0].uvw.x; v[0][1].y <- input[0].uvw.y; v[0][1].z <- input[0].uvw.z; 
                //   v[0][2].x <- input[0].instanceID; 
                //   v[1][0].x <- input[1].position.x; v[1][0].y <- input[1].position.y; v[1][0].z <- input[1].position.z; v[1][0].w <- input[1].position.w; 
                //   v[1][1].x <- input[1].uvw.x; v[1][1].y <- input[1].uvw.y; v[1][1].z <- input[1].uvw.z; 
                //   v[1][2].x <- input[1].instanceID; 
                //   v[2][0].x <- input[2].position.x; v[2][0].y <- input[2].position.y; v[2][0].z <- input[2].position.z; v[2][0].w <- input[2].position.w; 
                //   v[2][1].x <- input[2].uvw.x; v[2][1].y <- input[2].uvw.y; v[2][1].z <- input[2].uvw.z; 
                //   v[2][2].x <- input[2].instanceID
                //
                #line 35 "E:\Desktop\ComplexTerrainTest\Chapter 11 The Geometry Shader\TreeBillboard\FX\buildDensity.fx"
                mov r0.x, l(0)  // r0.x <- i
                mov r0.y, r0.x  // r0.y <- i
                loop 
                  mov r0.z, l(3)
                  ult r0.z, r0.y, r0.z
                  breakc_z r0.z
                  mov r1.xyzw, v[r0.y + 0][0].xyzw  // r1.x <- output.pos.x; r1.y <- output.pos.y; r1.z <- output.pos.z; r1.w <- output.pos.w
                  mov r2.xyz, v[r0.y + 0][1].xyzx  // r2.x <- output.uvw.x; r2.y <- output.uvw.y; r2.z <- output.uvw.z
                  mov r0.z, v[r0.y + 0][2].x  // r0.z <- output.instanceID
                  mov o0.xyzw, r1.xyzw
                  mov o1.xyz, r2.xyzx
                  mov o2.x, r0.z
                  emit_stream m0
                  iadd r0.y, r0.y, l(1)
                endloop 
                cut_stream m0
                ret 
                // Approximately 17 instruction slots used
                            
            };
            PixelShader = asm {
                //
                // Generated by Microsoft (R) HLSL Shader Compiler 6.3.9600.16384
                //
                //
                // Resource Bindings:
                //
                // Name                                 Type  Format         Dim Slot Elements
                // ------------------------------ ---------- ------- ----------- ---- --------
                // Point                             sampler      NA          NA    0        1
                // noiseTex                          texture  float4          3d    0        1
                //
                //
                //
                // Input signature:
                //
                // Name                 Index   Mask Register SysValue  Format   Used
                // -------------------- ----- ------ -------- -------- ------- ------
                // SV_POSITION              0   xyzw        0      POS   float       
                // TEXCOORD                 0   xyz         1     NONE   float   xyz 
                // SV_RenderTargetArrayIndex     0   x           2  RTINDEX    uint       
                //
                //
                // Output signature:
                //
                // Name                 Index   Mask Register SysValue  Format   Used
                // -------------------- ----- ------ -------- -------- ------- ------
                // SV_Target                0   xyzw        0   TARGET   float   xyzw
                //
                ps_5_0
                dcl_globalFlags refactoringAllowed | skipOptimization
                dcl_sampler s0, mode_default
                dcl_resource_texture3d (float,float,float,float) t0
                dcl_input_ps linear v1.xyz
                dcl_output o0.xyzw
                dcl_temps 1
                //
                // Initial variable locations:
                //   v0.x <- input.pos.x; v0.y <- input.pos.y; v0.z <- input.pos.z; v0.w <- input.pos.w; 
                //   v1.x <- input.uvw.x; v1.y <- input.uvw.y; v1.z <- input.uvw.z; 
                //   v2.x <- input.instanceID; 
                //   o0.x <- <PS return value>.x; o0.y <- <PS return value>.y; o0.z <- <PS return value>.z; o0.w <- <PS return value>.w
                //
                #line 55 "E:\Desktop\ComplexTerrainTest\Chapter 11 The Geometry Shader\TreeBillboard\FX\buildDensity.fx"
                div r0.z, v1.z, l(4.000000)
                itof r0.w, l(0)
                mov r0.xy, v1.xyxx
                sample_l_indexable(texture3d)(float,float,float,float) o0.xyzw, r0.xyzx, t0.xyzw, s0, r0.w
                ret 
                // Approximately 5 instruction slots used
                            
            };
        }

    }

}

